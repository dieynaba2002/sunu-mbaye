<app-header></app-header>
<!-- Debut de la section accueil -->
<section class="section-banner">
  <div class="banner-container"></div>
  <h1 class="text-center titre text-white">Nos Produits</h1>
</section>
<!-- fin de section -->

<!-- Debut section nos produits -->
<!-- Menu filtre pour le tableau des projets  -->
<section class="mt-4" id="section">
  <div class="test mt-5">
    <div class="menuFiltre mt-5 d-flex">
      <div class="filtreSection">
        <button class="btn fw-bold px-3 active" (click)="filterByCategory(null)" [class.active]="selectedCategory === null">
          Tout
        </button>
        <button class="btn fw-bold px-3" *ngFor="let categorie of categories"(click)="filterByCategory(categorie.id)" [class.active]="selectedCategory === categorie.id">
          {{ categorie.nom_categories }}
        </button>
      </div>
    </div>
    <nav class="ms-5">
      <form action="#" class="recherche">
        <div class="form-input">
          <input
            type="search"
            placeholder="Rechercher..."
            name="search"
            [(ngModel)]="filterValue"
            (input)="onSearch()"
          />
          <button type="submit" class="search-btn">
            <i class="bx bx-search"></i>
          </button>
        </div>
      </form>
    </nav>
  </div>
</section>

<section class="mt-4" id="section">
  <h2 class="fw-bold text-center mt-5">Nos produits</h2>
  <div class="decoration">
    <span class="soulignement"></span>
    <i class="bi bi-flower3"></i>
    <span class="soulignement"></span>
  </div>
  <div class="grid-produit mt-4">
    <!-- Tableau des projets en cours -->
    <div
      class="col"
      *ngFor="let produit of filterValue ? tabNewsFilter : getProduitPage()"
    >
      <div class="image-col">
        <a
          href=""
          data-bs-toggle="modal"
          data-bs-target="#exampleModal"
          (click)="getProduit(produit)"
          ><img
            src="http://127.0.0.1:8000/images/{{ produit.images }}"
            alt=""
            height="100%"
            width="100%"
          />
        </a>
      </div>
      <div class="card-body">
        <h5 class="card-title text-center mt-3 titre-couleur fw-bold">
          {{ produit.nom_produit }}
        </h5>
        <h5 class="mt-2 card-title text-center">{{ produit.prix }}fr / Kg</h5>
      </div>
      <div class="info-profil">
        <div class="image-profil">
          <img
            src="https://bootstrapmade.com/demo/templates/Impact/assets/img/blog/blog-author.jpg"
            alt=""
          />
        </div>
        <div class="info d-flex">
          <span>{{ produit.user_nom }}</span>
          <a>
            <a type="button" (click)="addToCart(produit)">
              <svg
                width="35"
                height="35"
                viewBox="0 0 50 50"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g id="typcn:shopping-cart">
                  <path
                    id="Vector"
                    d="M43.2413 11.1354C43.0454 10.91 42.8035 10.7292 42.5318 10.6053C42.2601 10.4813 41.965 10.417 41.6663 10.4167H12.8768L12.4705 7.99167C12.3896 7.50521 12.1388 7.06321 11.7627 6.74429C11.3865 6.42538 10.9095 6.25023 10.4163 6.25H5.72884C5.17631 6.25 4.6464 6.46949 4.2557 6.86019C3.865 7.25089 3.64551 7.7808 3.64551 8.33333C3.64551 8.88587 3.865 9.41577 4.2557 9.80647C4.6464 10.1972 5.17631 10.4167 5.72884 10.4167H8.65176L12.5268 33.675L12.6205 33.9333L12.733 34.2479L12.983 34.6208L13.1809 34.8542L13.583 35.125L13.8163 35.2604C14.0586 35.3617 14.3183 35.4148 14.5809 35.4167H37.4997C38.0522 35.4167 38.5821 35.1972 38.9728 34.8065C39.3635 34.4158 39.583 33.8859 39.583 33.3333C39.583 32.7808 39.3635 32.2509 38.9728 31.8602C38.5821 31.4695 38.0522 31.25 37.4997 31.25H16.3476L16.0018 29.1667H39.583C40.0843 29.1667 40.5689 28.986 40.9477 28.6577C41.3266 28.3293 41.5743 27.8754 41.6455 27.3792L43.7288 12.7958C43.771 12.5003 43.7493 12.1992 43.6652 11.9127C43.5812 11.6263 43.4366 11.3612 43.2413 11.1354ZM39.2643 14.5833L38.6705 18.75H31.2497V14.5833H39.2643ZM29.1663 14.5833V18.75H22.9163V14.5833H29.1663ZM29.1663 20.8333V25H22.9163V20.8333H29.1663ZM20.833 14.5833V18.75H14.583L14.2747 18.8125L13.5705 14.5833H20.833ZM14.6122 20.8333H20.833V25H15.3059L14.6122 20.8333ZM31.2497 25V20.8333H38.3705L37.7768 25H31.2497Z"
                    fill="black"
                  />
                  <path
                    id="Vector_2"
                    d="M17.708 43.75C19.4339 43.75 20.833 42.3509 20.833 40.625C20.833 38.8991 19.4339 37.5 17.708 37.5C15.9821 37.5 14.583 38.8991 14.583 40.625C14.583 42.3509 15.9821 43.75 17.708 43.75Z"
                    fill="black"
                  />
                  <path
                    id="Vector_3"
                    d="M36.458 43.75C38.1839 43.75 39.583 42.3509 39.583 40.625C39.583 38.8991 38.1839 37.5 36.458 37.5C34.7321 37.5 33.333 38.8991 33.333 40.625C33.333 42.3509 34.7321 43.75 36.458 43.75Z"
                    fill="black"
                  />
                </g>
              </svg>
            </a>
          </a>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- fin de section -->

<div class="d-flex justify-content-center my-5">
  <button
    class="btn btnColor me-2 pagination-button"
    [disabled]="pageActuelle === 1"
    (click)="pageActuelle = pageActuelle - 1"
  >
    <i class="bi bi-caret-left-fill" style="font-size: 14px"></i>
  </button>
  <button
    class="btn btnColor ms-2 pagination-button"
    *ngFor="let page of pages"
    (click)="pageActuelle = page"
    [class.active]="page === pageActuelle"
  >
    {{ page }}
  </button>
  <button
    class="btn btnColor ms-2 pagination-button"
    [disabled]="pageActuelle === totalPages"
    (click)="pageActuelle = pageActuelle + 1"
  >
    <i class="bi bi-caret-right-fill" style="font-size: 14px"></i>
  </button>
</div>

<!-- detailproduit -->

<div
  class="modal fade modal-lg"
  id="exampleModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header border-0">
        <!-- <h5 class="modal-title" id="exampleModalLabel">Modal title</h5> -->
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="card mb-3 border-0" style="max-width: 100%">
          <div class="row g-0">
            <div class="col-md-4" id="image-detail">
              <img
                src="http://127.0.0.1:8000/images/{{ seletedProduit.images }}"
                class="img-fluid rounded-start"
                alt="..."
              />
            </div>
            <div class="col-md-8">
              <div class="card-body">
                <h3 class="card-title fw-bold">
                  {{ seletedProduit.nom_produit }}
                </h3>
                <p class="card-text">
                  {{ seletedProduit.description }}
                </p>
                <p class="card-text">
                  <small class="text-muted fw-bold"
                    >Quantit√©:{{ seletedProduit.quantite }}</small
                  >
                </p>
                <p class="card-text">
                  <small class="text-muted fw-bold"
                    >Prix (kg):{{ seletedProduit.prix }}</small
                  >
                </p>
                <div class="contain-elt-panier">
                  <div class="product-quantity">
                    <input type="number" value="1" min="1" />
                  </div>
                  <button class="btn btn-ajoutpanier" (click)="addToCart(seletedProduit)">Ajouter au panier</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Close
        </button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div> -->
    </div>
  </div>
</div>

<!-- fin -->
<app-footer></app-footer>
